# Context free grammar for validation of parse trees
# Lines starting with # are comments
# Rules ending with '+'  mean 'at least 1'
# Rules ending with '?' are '0 or 1' 
# Rules can inherit base classes with RULE$BASE_CLASS

ROOT: QUERY | COUNT | EXISTS | ISA | IS_LESS | IS_GREATER | EXISTS_RELATION

# PROPERTY is the subject or the object of an RDF triple. The child QUERY or ENTITY+ is the other side of the triple.
# It can have an associated VARIABLE and types
PROPERTY$QUERY: QUERY VARIABLE? TYPE+? | ENTITY+ VARIABLE? TYPE+? | LITERAL TYPE+? VARIABLE? | QUERY ENTITY+ TYPE+? VARIABLE?
ENUMERATE$QUERY: TYPE+?

ARGMAX$QUERY: QUERY VARIABLE? | ENTITY+ VARIABLE? | QUERY QUERY VARIABLE? | QUERY ENTITY VARIABLE?
ARGMIN$QUERY: QUERY VARIABLE? | ENTITY+ VARIABLE? | QUERY QUERY VARIABLE? | QUERY ENTITY VARIABLE?
ARGNTH$QUERY: QUERY LITERAL VARIABLE?

# Count operation on a set of entities
COUNT: QUERY VARIABLE?

# Returns true if entity set is not empty
EXISTS: QUERY

# Returns true if a property exists between two given entities
EXISTS_RELATION: ENTITY ENTITY | QUERY ENTITY | QUERY QUERY | QUERY LITERAL | ENTITY LITERAL

# Returns true if entity set is part of all given
ISA: QUERY TYPE+ | ENTITY+ TYPE+

# Returns true if the first entity has a property greater than the second
IS_GREATER: ENTITY ENTITY

# Returns true if the first entity has a property less than the second
IS_LESS: ENTITY ENTITY

# Filters entity by property value greater than the given literal
GREATER$QUERY: QUERY LITERAL

# Filters entity by property value less than the given literal
LESS$QUERY: QUERY LITERAL

TYPE: TOKEN+
ENTITY: TOKEN+ TYPE+?
LITERAL: TOKEN+
UNUSED: TOKEN+
VARIABLE: TOKEN+